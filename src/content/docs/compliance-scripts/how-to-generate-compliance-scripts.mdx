---
title: How to Generate Compliance Scripts
description: Create a compliance script from your baseline.
---

import { Steps, FileTree, Aside } from '@astrojs/starlight/components';

export const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : import.meta.env.BASE_URL + '/';

Compliance scripts are generated using the `generate_guidance.py` script with the `-s` flag. The script reads your baseline and creates a zsh script ready for deployment.

<Aside type="note">
You need a baseline first. See <a href={`${base}baselines/how-to-generate-baselines/`}>How to Generate Baselines</a> if you haven't created one.
</Aside>

<Aside type="caution" title="Always Use the Correct Branch (mSCP 1.0)">
Each macOS version has its own branch (`sequoia`, `sonoma`, `ventura`, etc.). **Never use the `main` branch** â€” it won't work for generating content.

**mSCP 2.0 (currently in beta)** will remove the per-branch requirement and introduce easier installation methods.
</Aside>

---

## Generate a Compliance Script

<Steps>

1. **Run the generation script**

   ```bash
   ./scripts/generate_guidance.py -s baselines/BASELINE_NAME.yaml
   ```

   Example:
   ```bash
   ./scripts/generate_guidance.py -s baselines/800-53r5_moderate.yaml
   ```

2. **Find your files**

   The `-s` flag generates the compliance script and audit plist. Guidance documents are also created by default.

   <FileTree>
   - build/
       - 800-53r5_moderate/
           - 800-53r5_moderate_compliance.sh - Compliance script
           - 800-53r5_moderate.adoc - AsciiDoc guidance
           - 800-53r5_moderate.html - HTML guidance
           - 800-53r5_moderate.pdf - PDF guidance
           - preferences/
               - org.800-53r5_moderate.audit.plist
   </FileTree>

</Steps>

---

## Running the Script

Run with sudo for full access to system settings:

```zsh
sudo ./build/BASELINE_NAME/BASELINE_NAME_compliance.sh
```

| Flag | Description |
|:-----|:------------|
| *(no flags)* | Interactive menu mode |
| `--check` | Run compliance checks without interaction |
| `--fix` | Run remediation commands without interaction |
| `--cfc` | Run check, fix, check sequence |
| `--stats` | Display statistics from last scan |
| `--compliant` | Report number of compliant checks |
| `--non_compliant` | Report number of non-compliant checks |
| `--reset` | Clear results for current baseline |
| `--reset-all` | Clear results for all mSCP baselines |

<Aside type="tip">
The script must be run with zsh. Running with `sh` or `bash` will result in errors.
</Aside>

---

## Runtime Output

When executed, the script creates:

| File | Location |
|:-----|:---------|
| Audit plist | `/Library/Preferences/org.BASELINE_NAME.audit.plist` |
| Log file | `/Library/Logs/BASELINE_NAME_baseline.log` |

---

## Next Steps

- <a href={`${base}compliance-scripts/compliance-script-layout/`}>Compliance Script Layout</a> - Understand the script structure
- <a href={`${base}compliance-scripts/what-are-compliance-scripts/`}>What Are Compliance Scripts?</a> - Learn more about compliance scripts

<style>{`
  .sl-markdown-content th {
    background: var(--sl-color-accent-low);
    font-weight: 600;
  }
  .sl-markdown-content td, .sl-markdown-content th {
    padding: 0.6rem 1rem;
  }
  .sl-markdown-content td code {
    background: var(--sl-color-bg-inline-code);
    padding: 0.15em 0.35em;
    font-size: 0.85em;
  }
`}</style>
